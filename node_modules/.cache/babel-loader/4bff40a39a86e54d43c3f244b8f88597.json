{"ast":null,"code":"import _classCallCheck from \"/Users/monica/Desktop/snack-training/template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/monica/Desktop/snack-training/template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/monica/Desktop/snack-training/template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/monica/Desktop/snack-training/template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/monica/Desktop/snack-training/template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/monica/Desktop/snack-training/template/src/shared/components/auth/withAuthFirebase.jsx\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { connect } from 'react-redux';\nimport * as firebase from 'firebase/app';\nimport PropTypes from 'prop-types';\nimport ModalLoginForm from '../ModalLoginForm';\nimport { auth, authError } from '../../../redux/actions/authActions';\n\nfunction withAuthFirebase(WrappedComponent) {\n  var HocAuth =\n  /*#__PURE__*/\n  function (_Component) {\n    _inherits(HocAuth, _Component);\n\n    function HocAuth() {\n      var _getPrototypeOf2;\n\n      var _this;\n\n      _classCallCheck(this, HocAuth);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(HocAuth)).call.apply(_getPrototypeOf2, [this].concat(args)));\n      _this.state = {\n        error: '',\n        isOpen: false\n      };\n\n      _this.closeModal = function () {\n        _this.setState(function (prevState) {\n          return {\n            isOpen: !prevState.isOpen\n          };\n        });\n      };\n\n      _this.onSubmitFireBase = function (_ref) {\n        var username = _ref.username,\n            password = _ref.password;\n        var _this$props = _this.props,\n            history = _this$props.history,\n            dispatch = _this$props.dispatch;\n\n        _this.setState({\n          error: ''\n        });\n\n        firebase.auth().signInWithEmailAndPassword(username, password).then(function (res) {\n          dispatch(auth({\n            name: res.user.email\n          }));\n          history.push('/dashboard_mobile_app');\n\n          _this.setState({\n            isOpen: false\n          });\n        }).catch(function (error) {\n          _this.setState({\n            error: error.message\n          });\n        });\n      };\n\n      _this.onLoginGoogle = function () {\n        var _this$props2 = _this.props,\n            history = _this$props2.history,\n            dispatch = _this$props2.dispatch;\n        var provider = new firebase.auth.GoogleAuthProvider();\n        firebase.auth().signInWithPopup(provider).then(function (res) {\n          localStorage.setItem('easydev', res.credential.accessToken);\n          dispatch(auth({\n            name: res.user.displayName,\n            avatar: res.user.photoURL\n          }));\n          history.push('/dashboard_mobile_app');\n        }).catch(function (error) {\n          dispatch(authError(error.message));\n        });\n      };\n\n      _this.onLoginFacebook = function () {\n        var _this$props3 = _this.props,\n            history = _this$props3.history,\n            dispatch = _this$props3.dispatch;\n        var provider = new firebase.auth.FacebookAuthProvider();\n        firebase.auth().signInWithPopup(provider).then(function (res) {\n          localStorage.setItem('easydev', res.credential.accessToken);\n          dispatch(auth({\n            name: res.user.displayName,\n            avatar: res.user.photoURL\n          }));\n          history.push('/dashboard_mobile_app');\n        }).catch(function (error) {\n          dispatch(authError(error.message));\n        });\n      };\n\n      _this.changeIsOpenModalFireBase = function () {\n        _this.setState({\n          isOpen: true,\n          error: ''\n        });\n      };\n\n      return _this;\n    }\n\n    _createClass(HocAuth, [{\n      key: \"render\",\n      value: function render() {\n        var _this$state = this.state,\n            error = _this$state.error,\n            isOpen = _this$state.isOpen;\n        return React.createElement(\"div\", {\n          className: \"account\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, React.createElement(ModalLoginForm, {\n          title: \"Sign in with Firebase\",\n          isOpen: isOpen,\n          error: error,\n          form: \"log_in_modal\",\n          onSubmit: this.onSubmitFireBase,\n          closeModal: this.closeModal,\n          onGoogleClick: this.onLoginGoogle,\n          onFacebookClick: this.onLoginFacebook,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }), React.createElement(WrappedComponent, Object.assign({}, this.props, {\n          changeIsOpenModalFireBase: this.changeIsOpenModalFireBase,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        })));\n      }\n    }]);\n\n    return HocAuth;\n  }(Component);\n\n  HocAuth.propTypes = {\n    history: PropTypes.shape({\n      push: PropTypes.func\n    }).isRequired,\n    dispatch: PropTypes.func.isRequired\n  };\n  return connect()(withRouter(HocAuth));\n}\n\nexport default withAuthFirebase;","map":{"version":3,"sources":["/Users/monica/Desktop/snack-training/template/src/shared/components/auth/withAuthFirebase.jsx"],"names":["React","Component","withRouter","connect","firebase","PropTypes","ModalLoginForm","auth","authError","withAuthFirebase","WrappedComponent","HocAuth","state","error","isOpen","closeModal","setState","prevState","onSubmitFireBase","username","password","props","history","dispatch","signInWithEmailAndPassword","then","res","name","user","email","push","catch","message","onLoginGoogle","provider","GoogleAuthProvider","signInWithPopup","localStorage","setItem","credential","accessToken","displayName","avatar","photoURL","onLoginFacebook","FacebookAuthProvider","changeIsOpenModalFireBase","propTypes","shape","func","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { connect } from 'react-redux';\nimport * as firebase from 'firebase/app';\nimport PropTypes from 'prop-types';\nimport ModalLoginForm from '../ModalLoginForm';\nimport { auth, authError } from '../../../redux/actions/authActions';\n\nfunction withAuthFirebase(WrappedComponent) {\n  class HocAuth extends Component {\n    static propTypes = {\n      history: PropTypes.shape({\n        push: PropTypes.func,\n      }).isRequired,\n      dispatch: PropTypes.func.isRequired,\n    };\n\n    state = {\n      error: '',\n      isOpen: false,\n    };\n\n    closeModal = () => {\n      this.setState(prevState => ({\n        isOpen: !prevState.isOpen,\n      }));\n    }\n\n    onSubmitFireBase = ({ username, password }) => {\n      const { history, dispatch } = this.props;\n      this.setState({ error: '' });\n      firebase.auth().signInWithEmailAndPassword(username, password).then((res) => {\n        dispatch(auth({ name: res.user.email }));\n        history.push('/dashboard_mobile_app');\n        this.setState({ isOpen: false });\n      }).catch((error) => {\n        this.setState({ error: error.message });\n      });\n    };\n\n    onLoginGoogle = () => {\n      const { history, dispatch } = this.props;\n      const provider = new firebase.auth.GoogleAuthProvider();\n      firebase.auth().signInWithPopup(provider)\n        .then((res) => {\n          localStorage.setItem('easydev', res.credential.accessToken);\n          dispatch(auth({ name: res.user.displayName, avatar: res.user.photoURL }));\n          history.push('/dashboard_mobile_app');\n        })\n        .catch((error) => {\n          dispatch(authError(error.message));\n        });\n    }\n\n    onLoginFacebook = () => {\n      const { history, dispatch } = this.props;\n      const provider = new firebase.auth.FacebookAuthProvider();\n      firebase.auth().signInWithPopup(provider)\n        .then((res) => {\n          localStorage.setItem('easydev', res.credential.accessToken);\n          dispatch(auth({ name: res.user.displayName, avatar: res.user.photoURL }));\n          history.push('/dashboard_mobile_app');\n        })\n        .catch((error) => {\n          dispatch(authError(error.message));\n        });\n    }\n\n    changeIsOpenModalFireBase = () => {\n      this.setState({ isOpen: true, error: '' });\n    };\n\n    render() {\n      const { error, isOpen } = this.state;\n      return (\n        <div className=\"account\">\n          <ModalLoginForm\n            title=\"Sign in with Firebase\"\n            isOpen={isOpen}\n            error={error}\n            form=\"log_in_modal\"\n            onSubmit={this.onSubmitFireBase}\n            closeModal={this.closeModal}\n            onGoogleClick={this.onLoginGoogle}\n            onFacebookClick={this.onLoginFacebook}\n          />\n          <WrappedComponent {...this.props} changeIsOpenModalFireBase={this.changeIsOpenModalFireBase} />\n        </div>\n      );\n    }\n  }\n  return connect()(withRouter(HocAuth));\n}\n\nexport default withAuthFirebase;\n"]},"metadata":{},"sourceType":"module"}